# üß™ Electron App Testing Instructions

## 1. Start the Electron App
```bash
cd electron
npm start
# or
npm run electron
```

## 2. Open DevTools in Electron
- Press F12 or Ctrl+Shift+I in the Electron window
- Go to Console tab

## 3. Run these tests in the Console:

### Test 1: Check Configuration
```javascript
console.log('API Base:', window.API_BASE_URL)
console.log('Auth:', window.BASIC_AUTH)
console.log('CORS Debug available:', typeof window.corsDebug !== 'undefined')
```

### Test 2: Test Connection
```javascript
window.corsDebug.testConnection().then(result => {
    console.log('Connection test result:', result)
})
```

### Test 3: Manual Health Check
```javascript
fetch(window.API_BASE_URL + '/health', {
    headers: {
        'Authorization': 'Basic ' + btoa(window.BASIC_AUTH.username + ':' + window.BASIC_AUTH.password)
    }
}).then(r => r.json()).then(data => console.log('Health check:', data))
```

### Test 4: Complete CORS Test
```javascript
async function testElectronCORS() {
    console.log('üß™ Testing Electron CORS...')
    
    try {
        const health = await fetch(window.API_BASE_URL + '/health', {
            headers: {
                'Authorization': 'Basic ' + btoa(window.BASIC_AUTH.username + ':' + window.BASIC_AUTH.password)
            }
        })
        
        if (health.ok) {
            const data = await health.json()
            console.log('‚úÖ Health check passed:', data)
            
            // Test a POST request
            const chatTest = await fetch(window.API_BASE_URL + '/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Basic ' + btoa(window.BASIC_AUTH.username + ':' + window.BASIC_AUTH.password)
                },
                body: JSON.stringify({ prompt: 'Hello test', model: 'qwen2.5:3b-instruct' })
            })
            
            if (chatTest.ok) {
                console.log('‚úÖ POST request test passed')
                console.log('üéâ All CORS tests PASSED! Your Electron app is ready!')
            } else {
                console.log('‚ùå POST request failed:', chatTest.status)
            }
        } else {
            console.log('‚ùå Health check failed:', health.status)
        }
    } catch (error) {
        console.error('‚ùå CORS test failed:', error)
    }
}

testElectronCORS()
```

## Expected Results:
- ‚úÖ All tests should pass without CORS errors
- ‚úÖ Health check should return VPS data
- ‚úÖ POST requests should work
- ‚úÖ No network errors in console

## If Tests Fail:
1. Check Network tab for specific error messages
2. Look for CORS-related errors in Console
3. Verify VPS backend is running: docker ps
4. Test backend directly: curl -H "Authorization: Basic bXljYTp3ajJZeXhySjRjcWNYZ0NB" http://95.111.244.159:8000/api/health
5. Apply missing CORS fixes from ELECTRON-CORS-FIX.md
