# Backend Environment Configuration - VPS SIDE
# Copy this file to .env and fill in your values

# =============================================================================
# APP CONFIGURATION
# =============================================================================

APP_HOST=0.0.0.0                      # Bind address (required for external access)
APP_PORT=8000                          # Port number
LOG_LEVEL=INFO                         # Log level: DEBUG, INFO, WARNING, ERROR

# =============================================================================
# VPS OPTIMIZATIONS (OPTIMIZED for 6-core VPS)
# =============================================================================

# Whisper Settings (OPTIMIZED for 3x speed)
WHISPER_MODEL=tiny                    # Model size: tiny=3x faster, base=balanced, small/medium/large=slower
WHISPER_COMPUTE_TYPE=int8             # Compute type: int8=fastest, int16=slower, float16/float32=slowest
WHISPER_DEVICE=cpu                    # Force CPU usage for VPS
WHISPER_CPU_THREADS=6                 # Optimize for 6 vCPU VPS (use 6 out of 8 cores)
WHISPER_MEMORY_LIMIT_GB=16           # Memory limit for Whisper (leaves 8GB for system)
WHISPER_BEAM_SIZE=1                   # Beam size for CPU optimization (1=fastest, 5=better quality)
WHISPER_DOWNLOAD_ROOT=./models        # Local model storage (VPS path)

# Ollama Settings (OPTIMIZED for 3x speed)
OLLAMA_BASE_URL=http://localhost:11434  # Ollama service URL (localhost since it runs on same VPS)
OLLAMA_MODEL=llama3.1:8b-q5_K_M      # Quantized model: q5_K_M=3x faster, 8b=balanced, q4_K_M=4x faster
OLLAMA_TIMEOUT_SECONDS=120            # Request timeout (increased for large summaries)
OLLAMA_CPU_THREADS=6                  # CPU thread allocation (optimal for VPS)
OLLAMA_MEMORY_LIMIT_GB=16             # Memory limit for Ollama (q5_K_M uses ~4-6GB vs 8-12GB)

# =============================================================================
# LANGUAGE RESTRICTIONS (OPTIMIZED for speed)
# =============================================================================

ALLOWED_LANGUAGES=tr,en               # OPTIMIZED: EN+TR only (20-25% speed boost vs auto-detect)
FORCE_LANGUAGE_VALIDATION=true        # Strict language validation (prevents errors)

# =============================================================================
# PROGRESS TRACKING
# =============================================================================

ENABLE_PROGRESS_TRACKING=true         # Enable progress tracking
PROGRESS_UPDATE_INTERVAL_MS=500       # Progress update frequency
ENABLE_SSE=true                       # Enable Server-Sent Events

# =============================================================================
# QUEUE SYSTEM
# =============================================================================

USE_QUEUE_SYSTEM=true                 # Enable Redis-based job queuing
REDIS_URL=redis://localhost:6385      # Redis connection URL (localhost for VPS)
QUEUE_MAX_WORKERS=2                   # Maximum concurrent workers

# =============================================================================
# PERFORMANCE & RESOURCES (OPTIMIZED for VPS)
# =============================================================================

MAX_CONCURRENCY=2                     # OPTIMIZED: 2 concurrent transcriptions (optimal for 6-core VPS)
MAX_UPLOAD_MB=100                     # Maximum file upload size in MB (supports 60+ min meetings)

# =============================================================================
# AUTHENTICATION (REQUIRED for Security)
# =============================================================================

BASIC_AUTH_USERNAME=myca              # HTTP Basic Auth username (REQUIRED - change this!)
BASIC_AUTH_PASSWORD=wj2YyxrJ4cqcXgCA # HTTP Basic Auth password (REQUIRED - change this!)

# =============================================================================
# CORS & SECURITY
# =============================================================================

ALLOWED_ORIGINS=["*"]                 # CORS allowed origins

# =============================================================================
# DATABASE
# =============================================================================

DATABASE_URL=sqlite:///./app.db        # SQLite database path
DATABASE_ECHO=false                    # SQL query logging

# =============================================================================
# DEVELOPMENT
# =============================================================================

DEBUG=false                            # Debug mode
RELOAD=false                           # Auto-reload on code changes

# =============================================================================
# IMPORTANT NOTES
# =============================================================================
# 1. This file goes on your VPS at /myca/on-prem-ai-note-taker/backend/.env
# 2. Ollama runs on same VPS at http://localhost:11434
# 3. Redis runs on same VPS at redis://localhost:6385
# 4. Backend API accessible at http://95.111.244.159:8000
# 5. Frontend connects from your laptop to this VPS
# 6. CHANGE THE DEFAULT PASSWORDS for security!
